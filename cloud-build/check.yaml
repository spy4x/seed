steps:

  - id: fetch_master_for_affected_commands
    name: node
    entrypoint: bash
    args: ['-c', 'git fetch --unshallow']

  - id: install_deps
    name: node
    entrypoint: bash
    args: ['-c', 'yarn install --frozen-lockfile']

  - id: format
    name: node
    entrypoint: bash
    args: ['-c', 'yarn ci:format']
    waitFor: [install_deps]

  - id: lint
    name: node
    entrypoint: bash
    args: ['-c', 'yarn ci:lint']
    waitFor: [install_deps]

  - id: test
    name: node
    entrypoint: bash
    args: ['-c', 'yarn ci:test']
    waitFor: [install_deps]

  - id: build
    name: node
    entrypoint: bash
    args: ['-c', 'yarn ci:build']
    waitFor: [install_deps]

  - id: e2e
    name: node
    entrypoint: bash
    args: ['-c', 'yarn ci:e2e']
    waitFor: [install_deps]
